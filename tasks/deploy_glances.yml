- name: Install PIPx
  ansible.builtin.apt:
    name: pipx

- name: Install Glances
  ansible.builtin.command: pipx install 'glances[all]'

- name: Copy service file
  ansible.builtin.copy:
    src: files/glances.service
    dest: /etc/systemd/system/glances.service
    force: true
    mode: u=rw,go=r

- name: Enable Glances service
  ansible.builtin.systemd:
    name: glances
    state: started
    enabled: true
    daemon_reload: true